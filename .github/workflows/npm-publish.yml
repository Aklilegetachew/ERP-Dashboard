# name: Deploy Next.js App

# on:
#   push:
#     branches:
#       - main

# jobs:
#   build-and-deploy:
#     runs-on: ubuntu-latest
#     steps:
#     - uses: actions/checkout@v2
#     - name: Install dependencies
#       run: npm install --force
#     - name: Build app
#       run: npm run build
#     - name: Deploy app
#       uses: appleboy/scp-action@master
#       with:
#         host: ${{ secrets.HOST }}
#         username: ${{ secrets.USERNAME }}
#         password: ${{ secrets.PASSWORD }}
#         source: .next/*
#         target: /home/sam/ERP-Dashboard
#     - name: Install pm2
#       run: npm i -g pm2
#     - name: start pm2
#       run: pm2 start npm --name "material-kit-react" -- start
on: push
  push:
    branches:
      - main
name: ðŸš€ Deploy website on push
jobs:
  web-deploy:
    name: ðŸŽ‰ Deploy
    runs-on: ubuntu-latest
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v2

      - name: ðŸ“‚ Sync files
        uses: webitsbr/github-to-ftp@1.0.1
        with:
          server: ${{ secrets.CPANEL_HOST }}
          server-dir: /public_html/erp_frontend
          username: ${{ secrets.CPANEL_USERNAME  }}
          password: ${{ secrets.CPANEL_PASSWORD  }}